# ==========================================
# AI SVNä»£ç å®¡æŸ¥å·¥å…· - é…ç½®ç¤ºä¾‹æ–‡ä»¶
# ==========================================
# è¯·æ ¹æ®æ‚¨çš„ç¯å¢ƒä¿®æ”¹ä»¥ä¸‹é…ç½®ï¼Œå¹¶é‡å‘½åä¸º config.yaml

# SVNé…ç½®
svn:
  repository_url: "https://your-svn-server/svn/project"  # æ›¿æ¢ä¸ºæ‚¨çš„SVNä»“åº“URL
  username: "svn_username"  # æ›¿æ¢ä¸ºæ‚¨çš„SVNç”¨æˆ·å
  password: "svn_password"  # æ›¿æ¢ä¸ºæ‚¨çš„SVNå¯†ç 
  check_interval: 300  # æ£€æŸ¥é—´éš”ï¼ˆç§’ï¼‰
  monitored_paths:  # ç›‘æ§çš„è·¯å¾„åˆ—è¡¨
    - "/trunk/src"
    - "/branches/dev"
    - "/src"
    - "/lib"
    # Unityé¡¹ç›®ç¤ºä¾‹è·¯å¾„
    # - "/Assets/Scripts"
    # - "/Assets/Plugins"
    # Webé¡¹ç›®ç¤ºä¾‹è·¯å¾„
    # - "/frontend/src"
    # - "/backend/api"

# ç›‘æ§æ¨¡å¼é…ç½®
monitor:
  enhanced_mode: false  # æ˜¯å¦ä½¿ç”¨å¢å¼ºæ¨¡å¼ï¼ˆæ”¯æŒwebhookå’Œæ›´å¥½çš„çŠ¶æ€ç®¡ç†ï¼‰
  webhook_port: 8080    # webhookæœåŠ¡å™¨ç«¯å£
  webhook_path: "/svn-hook"  # webhookæ¥æ”¶è·¯å¾„
  enable_polling: true  # æ˜¯å¦åŒæ—¶å¯ç”¨è½®è¯¢æ£€æŸ¥
  polling_interval: 300  # è½®è¯¢é—´éš”ï¼ˆç§’ï¼‰

# AI APIé…ç½®
ai:
  api_base: "https://api.openai.com/v1"  # OpenAIå…¼å®¹çš„APIåŸºç¡€URL
  api_key: "your_openai_api_key"  # æ›¿æ¢ä¸ºæ‚¨çš„APIå¯†é’¥
  model: "gpt-3.5-turbo"  # ä½¿ç”¨çš„æ¨¡å‹ï¼Œæ”¯æŒ: gpt-3.5-turbo, gpt-4, claude-3-sonnetç­‰
  max_tokens: 4000  # å“åº”æœ€å¤§tokenæ•°ï¼ˆæ¨è4000ä»¥æ”¯æŒå¤§å‹æäº¤ï¼‰
  temperature: 0.3  # åˆ›é€ æ€§å‚æ•°ï¼Œ0-1ä¹‹é—´ï¼Œè¶Šä½è¶Šä¿å®ˆ
  
  # å¤§å‹æäº¤å¤„ç†é…ç½®ï¼ˆæ–°å¢åŠŸèƒ½ï¼‰
  diff_limit: 25000  # diffå†…å®¹æˆªæ–­é•¿åº¦ï¼ˆå­—ç¬¦æ•°ï¼‰ï¼Œæ¨è25000
  enable_chunked_review: true  # å¯ç”¨åˆ†å—å®¡æŸ¥ï¼ˆæ¨èå¼€å¯ï¼‰
  chunk_size: 20000  # åˆ†å—å¤§å°ï¼ˆå­—ç¬¦æ•°ï¼‰
  
  system_prompt: |
    ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„ä»£ç å®¡æŸ¥åŠ©æ‰‹ã€‚è¯·åˆ†æä»¥ä¸‹ä»£ç å˜æ›´ï¼Œå¹¶æä¾›å»ºè®¾æ€§çš„å®¡æŸ¥æ„è§ã€‚
    é‡ç‚¹å…³æ³¨ï¼š
    1. ä»£ç è´¨é‡å’Œæœ€ä½³å®è·µ
    2. æ½œåœ¨çš„bugå’Œå®‰å…¨é—®é¢˜
    3. æ€§èƒ½ä¼˜åŒ–å»ºè®®
    4. ä»£ç å¯è¯»æ€§å’Œç»´æŠ¤æ€§
    è¯·æä¾›ç®€æ´æ˜äº†çš„ä¸­æ–‡åé¦ˆã€‚

# é’‰é’‰æœºå™¨äººé…ç½®
dingtalk:
  webhook_url: "https://oapi.dingtalk.com/robot/send?access_token=YOUR_ACCESS_TOKEN"
  secret: "YOUR_SECRET_KEY"  # å¯é€‰ï¼Œç”¨äºç­¾åéªŒè¯
  at_all: false  # æ˜¯å¦@æ‰€æœ‰äºº
  message_settings:
    max_message_length: 1000  # å•æ¡æ¶ˆæ¯æœ€å¤§é•¿åº¦
    enable_message_split: true  # æ˜¯å¦å¯ç”¨æ¶ˆæ¯åˆ†å‰²
    show_all_comments: true  # æ˜¯å¦æ˜¾ç¤ºæ‰€æœ‰è¯„è®º
    comment_max_length: 150  # å•æ¡è¯„è®ºæœ€å¤§é•¿åº¦
    suggestion_max_length: 200  # å•æ¡å»ºè®®æœ€å¤§é•¿åº¦

# ç”¨æˆ·æ˜ å°„é…ç½®æ–‡ä»¶è·¯å¾„
user_mapping_file: "config/user_mapping.yaml"

# æ—¥å¿—é…ç½®
logging:
  level: "INFO"  # æ—¥å¿—çº§åˆ«: DEBUG, INFO, WARNING, ERROR
  file: "logs/code_review.log"
  max_size_mb: 10
  backup_count: 5

# æ•°æ®å­˜å‚¨
data:
  processed_commits_file: "data/processed_commits.json"  # ä¼ ç»Ÿæ¨¡å¼ä½¿ç”¨
  commit_tracker_db: "data/commit_tracker.db"  # å¢å¼ºæ¨¡å¼ä½¿ç”¨
  cache_dir: "data/cache"

# æ‰¹é‡å®¡æŸ¥é…ç½®
batch_review:
  # æŠ¥å‘Šè¾“å‡ºé…ç½®
  reports_dir: "reports"  # æŠ¥å‘Šè¾“å‡ºç›®å½•
  report_format: "html"   # æŠ¥å‘Šæ ¼å¼: html, markdown, json
  include_code_diff: true  # æ˜¯å¦åœ¨æŠ¥å‘Šä¸­åŒ…å«ä»£ç å·®å¼‚
  max_diff_lines: 500     # å•ä¸ªæ–‡ä»¶å·®å¼‚æœ€å¤§æ˜¾ç¤ºè¡Œæ•°
  
  # æ–‡ä»¶è¿‡æ»¤é…ç½®ï¼ˆæ–°å¢åŠŸèƒ½ - è‡ªåŠ¨æ’é™¤å›¾ç‰‡ç­‰éä»£ç æ–‡ä»¶ï¼‰
  file_filters:
    # æ’é™¤çš„æ–‡ä»¶æ‰©å±•åï¼ˆä¸åŒºåˆ†å¤§å°å†™ï¼‰
    exclude_extensions:
      # å›¾ç‰‡æ–‡ä»¶
      - ".jpg"
      - ".jpeg"
      - ".png"
      - ".gif"
      - ".bmp"
      - ".tiff"
      - ".webp"
      - ".ico"
      - ".svg"
      # è§†é¢‘æ–‡ä»¶  
      - ".mp4"
      - ".avi"
      - ".mov"
      - ".wmv"
      - ".flv"
      - ".mkv"
      - ".webm"
      # éŸ³é¢‘æ–‡ä»¶
      - ".mp3"
      - ".wav"
      - ".flac"
      - ".aac"
      - ".ogg"
      - ".wma"
      # å‹ç¼©æ–‡ä»¶
      - ".zip"
      - ".rar"
      - ".7z"
      - ".tar"
      - ".gz"
      - ".bz2"
      # äºŒè¿›åˆ¶æ–‡ä»¶
      - ".exe"
      - ".dll"
      - ".so"
      - ".dylib"
      - ".bin"
      - ".dat"
      # åŠå…¬æ–‡æ¡£
      - ".pdf"
      - ".doc"
      - ".docx"
      - ".xls"
      - ".xlsx"
      - ".ppt"
      - ".pptx"
      # å­—ä½“æ–‡ä»¶
      - ".ttf"
      - ".otf"
      - ".woff"
      - ".woff2"
      # Unityç‰¹å®šèµ„æºæ–‡ä»¶ï¼ˆUnityé¡¹ç›®å¯ç”¨ï¼‰
      - ".asset"
      - ".prefab"
      - ".mat"
      - ".unity"
      - ".meta"  # Unityå…ƒæ–‡ä»¶
      # å…¶ä»–å¯é€‰æ’é™¤çš„æ–‡ä»¶ç±»å‹
      # - ".log"    # æ—¥å¿—æ–‡ä»¶
      # - ".tmp"    # ä¸´æ—¶æ–‡ä»¶
      # - ".cache"  # ç¼“å­˜æ–‡ä»¶
      # - ".lock"   # é”æ–‡ä»¶
    
    # åŒ…å«çš„æ–‡ä»¶æ‰©å±•åï¼ˆç™½åå•æ¨¡å¼ï¼Œå¦‚æœæŒ‡å®šåˆ™åªå®¡æŸ¥è¿™äº›ç±»å‹ï¼‰
    include_extensions: []  # ç©ºæ•°ç»„è¡¨ç¤ºä¸é™åˆ¶ï¼Œå®¡æŸ¥æ‰€æœ‰æœªè¢«æ’é™¤çš„æ–‡ä»¶
    # ç¤ºä¾‹ç™½åå•é…ç½®ï¼ˆåªå®¡æŸ¥ä»£ç æ–‡ä»¶ï¼‰:
    # include_extensions:
    #   - ".py"      # Python
    #   - ".js"      # JavaScript
    #   - ".ts"      # TypeScript
    #   - ".java"    # Java
    #   - ".cs"      # C#
    #   - ".cpp"     # C++
    #   - ".c"       # C
    #   - ".h"       # å¤´æ–‡ä»¶
    #   - ".php"     # PHP
    #   - ".rb"      # Ruby
    #   - ".go"      # Go
    #   - ".rs"      # Rust
    #   - ".lua"     # Lua
    #   - ".sql"     # SQL
    #   - ".json"    # JSONé…ç½®
    #   - ".xml"     # XMLé…ç½®
    #   - ".yaml"    # YAMLé…ç½®
    #   - ".yml"     # YAMLé…ç½®
    
    # æ˜¯å¦å¯ç”¨æ–‡ä»¶è¿‡æ»¤
    enable_file_filtering: true
    
    # è¿‡æ»¤ç»Ÿè®¡
    show_filter_stats: true  # æ˜¾ç¤ºè¿‡æ»¤ç»Ÿè®¡ä¿¡æ¯
  
  # å®¡æŸ¥èŒƒå›´é…ç½®
  default_paths:
    - "/trunk/src"
    - "/branches/dev"
  
  # è¿‡æ»¤é…ç½®
  filters:
    # ç‰ˆæœ¬å·è¿‡æ»¤
    revision_range:
      min_revision: null    # æœ€å°ç‰ˆæœ¬å·ï¼ˆåŒ…å«ï¼‰ï¼Œnullè¡¨ç¤ºä¸é™åˆ¶
      max_revision: null    # æœ€å¤§ç‰ˆæœ¬å·ï¼ˆåŒ…å«ï¼‰ï¼Œnullè¡¨ç¤ºä¸é™åˆ¶
    
    # ä½œè€…è¿‡æ»¤
    include_authors: []     # åªåŒ…å«æŒ‡å®šä½œè€…çš„æäº¤ï¼ˆç©ºæ•°ç»„è¡¨ç¤ºåŒ…å«æ‰€æœ‰ï¼‰
    exclude_authors:        # æ’é™¤æŒ‡å®šä½œè€…çš„æäº¤
      - "jenkins"
      - "jenkins-ci"
      - "ci"
      - "build"
      - "auto-deploy"
      - "bot"
      - "github-actions"
    
    # æäº¤ä¿¡æ¯è¿‡æ»¤
    include_message_patterns: []  # åªåŒ…å«åŒ¹é…æ¨¡å¼çš„æäº¤ä¿¡æ¯ï¼ˆç©ºæ•°ç»„è¡¨ç¤ºåŒ…å«æ‰€æœ‰ï¼‰
    exclude_message_patterns:     # æ’é™¤åŒ¹é…æ¨¡å¼çš„æäº¤ä¿¡æ¯
      - "auto build"
      - "jenkins"
      - "ci build"
      - "[bot]"
      - "merge branch"
      - "automatic"
      - "auto-generated"
      - "version bump"
    
    # é«˜çº§è¿‡æ»¤é€‰é¡¹
    case_sensitive: false   # æ˜¯å¦åŒºåˆ†å¤§å°å†™
    use_regex: false       # æ˜¯å¦ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…
  
  # AIå®¡æŸ¥é…ç½®ï¼ˆæ‰¹é‡æ¨¡å¼ä¸“ç”¨ï¼‰
  ai_settings:
    batch_size: 5        # æ‰¹é‡å¤„ç†æäº¤æ•°é‡
    delay_between_batches: 2  # æ‰¹æ¬¡é—´å»¶è¿Ÿï¼ˆç§’ï¼‰
    max_retries: 3       # APIè°ƒç”¨å¤±è´¥é‡è¯•æ¬¡æ•°
    
  # æŠ¥å‘Šå†…å®¹é…ç½®
  report_sections:
    summary: true        # åŒ…å«å®¡æŸ¥æ€»ç»“
    statistics: true     # åŒ…å«ç»Ÿè®¡ä¿¡æ¯
    recommendations: true # åŒ…å«æ”¹è¿›å»ºè®®
    detailed_reviews: true # åŒ…å«è¯¦ç»†å®¡æŸ¥å†…å®¹

# ==========================================
# å¿«é€Ÿé…ç½®å‘å¯¼
# ==========================================
# 1. åŸºç¡€å¿…å¡«é…ç½®:
#    âœ… svn.repository_url     - SVNä»“åº“åœ°å€
#    âœ… svn.username           - SVNç”¨æˆ·å
#    âœ… svn.password           - SVNå¯†ç 
#    âœ… ai.api_base            - AI APIåœ°å€
#    âœ… ai.api_key             - AI APIå¯†é’¥
#    âš ï¸  dingtalk.webhook_url   - é’‰é’‰é€šçŸ¥(å¯é€‰)
#
# 2. è·¯å¾„é…ç½®:
#    âœ… svn.monitored_paths    - ç›‘æ§çš„SVNè·¯å¾„
#    âœ… batch_review.default_paths - æ‰¹é‡å®¡æŸ¥é»˜è®¤è·¯å¾„
#
# 3. é¡¹ç›®ç±»å‹ä¼˜åŒ–:
#    ğŸ“± Unityé¡¹ç›®: ä¿ç•™Unityç›¸å…³æ–‡ä»¶æ’é™¤é…ç½®
#    ğŸŒ Webé¡¹ç›®: å¯ç§»é™¤Unityç›¸å…³æ’é™¤é¡¹ï¼Œå¢åŠ å‰ç«¯èµ„æºæ’é™¤
#    ğŸ–¥ï¸ åç«¯é¡¹ç›®: å¯å¢åŠ å‰ç«¯èµ„æºæ–‡ä»¶æ’é™¤
#    ğŸ“š é€šç”¨é¡¹ç›®: ä½¿ç”¨é»˜è®¤é…ç½®å³å¯
#
# 4. æ€§èƒ½è°ƒä¼˜å»ºè®®:
#    ğŸ—ï¸  å¤§å‹é¡¹ç›®: 
#        - ai.diff_limit: 50000
#        - ai.max_tokens: 8000
#        - ai.chunk_size: 30000
#    ğŸ  å°å‹é¡¹ç›®: 
#        - ai.diff_limit: 15000  
#        - ai.max_tokens: 3000
#        - ai.chunk_size: 10000
#    ğŸŒ æ…¢é€Ÿç½‘ç»œ: 
#        - batch_review.ai_settings.delay_between_batches: 5
#
# 5. å›¢é˜Ÿåä½œé…ç½®:
#    ğŸ‘¥ å¤šäººå›¢é˜Ÿ: é…ç½®user_mapping.yamlè¿›è¡Œç”¨æˆ·æ˜ å°„
#    ğŸ¤– CI/CDé›†æˆ: è°ƒæ•´filters.exclude_authorså’Œexclude_message_patterns
#    ğŸ“Š è¯¦ç»†æŠ¥å‘Š: å¯ç”¨æ‰€æœ‰report_sectionsé€‰é¡¹
#
# 6. æˆæœ¬æ§åˆ¶:
#    ğŸ’° èŠ‚çœAPIæˆæœ¬: 
#        - å¯ç”¨file_filterså‡å°‘ä¸å¿…è¦çš„å®¡æŸ¥
#        - ä½¿ç”¨include_extensionsåªå®¡æŸ¥å…³é”®æ–‡ä»¶
#        - é€‚å½“é™ä½max_tokens
#    âš¡ æå‡æ•ˆç‡:
#        - å¯ç”¨enable_chunked_reviewå¤„ç†å¤§å‹æäº¤
#        - åˆç†è®¾ç½®batch_size
#
# é…ç½®å®Œæˆåï¼Œè¿è¡Œæµ‹è¯•å‘½ä»¤éªŒè¯é…ç½®:
# python debugTools/test_large_commit_fixes.py
# python debugTools/test_file_filters.py
